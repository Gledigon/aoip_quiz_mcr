<!DOCTYPE html>
<html lang="no" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.tawk.to https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; 
        script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.tawk.to https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; 
        style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://*.tawk.to; 
        img-src 'self' data: blob: https://*.tawk.to https://cdnjs.cloudflare.com; 
        font-src 'self' https://cdnjs.cloudflare.com; 
        connect-src 'self' https://*.tawk.to wss://*.tawk.to; 
        frame-src https://*.tawk.to;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    
    <title>MCR AoIP Challenge</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Ensure Tawk.to widget is visible */
        #tawk-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
        }
    </style>
</head>
<body>
    <!-- Rest of the previous HTML content remains the same -->

    <!-- Chat functionality -->
    <script>
    const CHAT = {
        tawkId: '6769ef41af5bfec1dbe0cf3e/1ifsbuaf1',
        isLoaded: false,

        start: function() {
            // Attempt to load or maximize Tawk.to chat
            if (window.Tawk_API) {
                try {
                    if (typeof Tawk_API.maximize === 'function') {
                        Tawk_API.maximize();
                    } else if (typeof Tawk_API.toggle === 'function') {
                        Tawk_API.toggle();
                    }
                } catch (error) {
                    console.error('Tawk.to chat error:', error);
                }
                return;
            }

            // Load Tawk.to if not already loaded
            this.loadTawkTo();
        },

        loadTawkTo: function() {
            // Ensure we don't load multiple times
            if (this.isLoaded) return;

            // Create container for Tawk.to widget
            const container = document.createElement('div');
            container.id = 'tawk-container';
            document.body.appendChild(container);

            // Tawk.to configuration
            window.Tawk_API = window.Tawk_API || {};
            
            // Maximize chat on load
            window.Tawk_API.onLoad = () => {
                try {
                    this.isLoaded = true;
                    if (typeof Tawk_API.maximize === 'function') {
                        Tawk_API.maximize();
                    }
                } catch (error) {
                    console.error('Tawk.to load error:', error);
                }
            };

            // Error handling for script loading
            window.Tawk_API.onError = (error) => {
                console.error('Tawk.to script error:', error);
            };

            // Create and insert script
            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.async = true;
            script.src = `https://embed.tawk.to/${this.tawkId}`;
            script.charset = 'UTF-8';
            script.crossOrigin = 'anonymous';

            const firstScript = document.getElementsByTagName('script')[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        }
    };

    // Automatically try to start chat on page load
    document.addEventListener('DOMContentLoaded', () => {
        const startChatBtn = document.getElementById('startChat');
        if (startChatBtn) {
            startChatBtn.addEventListener('click', () => CHAT.start());
        }
        
        // Attempt to load chat automatically
        CHAT.start();
    });
    </script>

    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/6769ef41af5bfec1dbe0cf3e/1ifsbuaf1';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
    </script>
    <!--End of Tawk.to Script-->
</body>
</html>
